---
title: "DATA 555 Interactive Visualization"
author: "Yuan (Anna) Chen"
output: html_document
---

# Interactive Visualization using Plotly() and DT()

This project examines the **power and performance of Likelihood Ratio (LR) and Wald tests** under a logistic regression-based **coincidence paradigm** for binary outcomes. The dataset consists of **90 clinical patients**, analyzing how **age, sex, and treatment duration** influence **relapse outcomes**.

### Dashboard aims or research questions investigated:

#### 1. How does age impact relapse rates?

#### 2. How does treatment duration vary by relapse status?

#### 3. Is there a relationship between sex and relapse status?

#### 4. Can we identify an age threshold where relapse risk significantly increases?

#### 5. Filterable Search tool: Users can find information for individual patient information.

Understanding the relationship between age, sex, and treatment outcomes is valuable for clinicians optimizing treatment strategies, researchers studying relapse risk factors, and policymakers evaluating healthcare interventions.

Two interactive exploratory data analysis graphs are presented: A side-by-side boxplot illustrating the relationship between age and relapse status, further distinguished by sex (Male/Female) using color coding. Also, a scatter plot showing the relationship between age and treatment duration (years), with additional context provided by color coding each data point based on relapse status (Yes/No). Additionally, a sortable and searchable data table using DT() is displayed below, allowing for interactive exploration of individual patient details.

```{r setup, include=FALSE}
library(ggplot2)
library(plotly)
library(dplyr)
library(DT)
knitr::opts_chunk$set(echo = TRUE, warning = FALSE, message = FALSE)
```

```{r load-data}
# Load dataset
data <- read.csv("/Users/annachen/Desktop/semester 4/DATA 555/sex_age_data.csv")

# Summary statistics
summary(data)
```

## **Side by Side Boxplot: Age Distribution by Relapse Status (Plotly)**

```{r boxplot-relapse, echo=FALSE}
data$relapse <- factor(data$relapse, labels = c("No Relapse", "Relapse"))
data$sex <- factor(data$sex, labels = c("Female", "Male"))

p1 <- ggplot(data, aes(x = relapse, y = age, fill = sex)) +
  geom_boxplot(outlier.shape = NA, alpha = 0.5) +
  geom_jitter(aes(text = paste("Age:", age, "<br>Sex:", sex, "<br>Treatment Duration:", duration)),
              width = 0.2, alpha = 0.7) +
  labs(
    title = "Age Distribution by Relapse Status",
    x = "Relapse Status of Cancer",
    y = "Age (years)",
    fill = "Sex"
  ) +
  theme_minimal()

ggplotly(p1, tooltip = "text")
```

### **Key Takeaways**
- **Older patients tend to relapse more frequently**.
- The **distribution of male and female patients within relapse groups** is clearly distinguishable.
- **Jitter points show individual patient details** when hovered over.



## **Scatter Plot: Age vs. Treatment Duration (Plotly)**

```{r scatter-age-duration, echo=FALSE}
p2 <- ggplot(data, aes(x = age, y = duration, color = factor(relapse))) +
  geom_point(aes(text = paste("Age:", age, "<br>Duration:", duration, "<br>Relapse Status of Cancer:", relapse)),
             alpha = 0.7) +
  geom_smooth(method = "lm", se = FALSE, linetype = "dashed", color = "black") +
  labs(
    title = "Scatter Plot: Age vs. Treatment Duration",
    x = "Age (years)",
    y = "Treatment Duration (years)",
    color = "Relapse Status of Cancer"
  ) +
  theme_minimal()

ggplotly(p2, tooltip = "text")
```

### **Key Takeaways**
- **No strong correlation observed** between age and treatment duration.
- Patients who **relapsed tend to have slightly longer treatment durations**.
- **Hover tooltips display patient-specific information**.



## **An interactive data table created from DT()**

```{r datatable, echo=FALSE}
data_table <- data %>%
  rename(
    "Sex" = sex,
    "Age (years)" = age,
    "Treatment Duration (years)" = duration,
    "Relapse Status of Cancer" = relapse
  )

DT::datatable(data_table, options = list(
  pageLength = 10,
  autoWidth = TRUE,
  searching = TRUE,
  dom = 'Blfrtip',
  columnDefs = list(
    list(className = 'dt-center', targets = c(1,2,3,4)),
    list(orderable = TRUE, targets = '_all')
  )
),
rownames = FALSE,
filter = "top")
```













